<?php

use Codeception\TestCase\Test;


class PersonFactorCalculatedRepositoryTest extends Test
{
    use Codeception\Specify;

    /**
     * @var \Symfony\Component\DependencyInjection\Container
     */
    private $container;

    /**
     * @var \Synapse\CoreBundle\Repository\RepositoryResolver
     */
    private $repositoryResolver;

    /**
     * @var \Synapse\SurveyBundle\Repository\PersonFactorCalculatedRepository
     */
    private $personFactorCalculatedRepository;

    /**
     * @var array
     */
    private $studentIds = ["4671832", "4671920", "4671935", "4672036", "4672091", "4672162", "4672203", "1031741", "4671833", "4672074", "4672076", "4672143", "4672189", "4672271", "4672280", "4671782", "4671785", "4671808", "4671811", "4671838", "4671857", "4671858", "4671862", "4671882", "4671888", "4671902", "4671903", "4671918", "4671932", "4671966", "4671968", "4671976", "4671977", "4671983", "4671991", "4671996", "4671999", "4672035", "4672045", "4672050", "4672052", "4672054", "4672085", "4672086", "4672087", "4672103", "4672120", "4672121", "4672139", "4672146", "4672173", "4672178", "4672187", "4672194", "4672198", "4672206", "4672222", "4672234", "4672238", "4672245", "4672258", "4672272", "4672281", "4671780", "4671797", "4671799", "4671803", "4671816", "4671859", "4671876", "4671880", "4671916", "4671923", "4671928", "4671951", "4671956", "4671960", "4671987", "4671993", "4672034", "4672046", "4672058", "4672082", "4672092", "4672130", "4672132", "4672155", "4672168", "4672192", "4672215", "4672231", "4672239", "4672247", "4671779", "4671783", "4671809", "4671813", "4671815", "4671824", "4671839", "4671844", "4671846", "4671850", "4671851", "4671867", "4671871", "4671879", "4671884", "4671905", "4671906", "4671908", "4671914", "4671915", "4671917", "4671919", "4671933", "4671953", "4671963", "4671965", "4671969", "4671982", "4671984", "4671985", "4671990", "4671992", "4672018", "4672037", "4672039", "4672041", "4672049", "4672057", "4672059", "4672071", "4672078", "4672080", "4672084", "4672089", "4672098", "4672102", "4672106", "4672108", "4672124", "4672129", "4672163", "4672167", "4672201", "4672229", "4672233", "4672237", "4672250", "4672251", "4672262", "4672269", "4672270", "4671818", "4671845", "4671874", "4671926", "4671934", "4671948", "4672025", "4672061", "4672122", "4672137", "4672171", "4671786", "4671812", "4671825", "4671829", "4671835", "4671848", "4671854", "4671860", "4671863", "4671873", "4671875", "4671909", "4671913", "4671925", "4671929", "4671937", "4671938", "4671941", "4671950", "4671955", "4671972", "4671979", "4671989", "4671994", "4672000", "4672004", "4672042", "4672062", "4672068", "4672081", "4672104", "4672113", "4672117", "4672145", "4672179", "4672197", "4672279", "4671817", "4671958", "4671970", "4672010", "4672114", "4672154", "4672223", "4672227", "4673340", "4671781", "4671791", "4671801", "4671802", "4671804", "4671806", "4671807", "4671826", "4671849", "4671881", "4671940", "4671997", "4672012", "4672021", "4672088", "4672095", "4672109", "4672128", "4672181", "4672211", "4672214", "4672255", "4672259", "4672273", "4671814", "4671821", "4671823", "4671831", "4671843", "4671853", "4671886", "4671910", "4671922", "4671945", "4671947", "4671975", "4671998", "4672011", "4672015", "4672029", "4672043", "4672079", "4672083", "4672094", "4672105", "4672111", "4672125", "4672153", "4672170", "4672175", "4672176", "4672184", "4672217", "4672244", "4672249", "4672257", "4672261", "4672263", "4672268", "4671784", "4671788", "4671789", "4671834", "4671836", "4671842", "4671847", "4671855", "4671861", "4671870", "4671890", "4671891", "4671893", "4671894", "4671895", "4671900", "4671921", "4671931", "4671936", "4671942", "4671943", "4671949", "4671959", "4671961", "4671964", "4671971", "4671973", "4671988", "4671995", "4672002", "4672005", "4672028", "4672031", "4672056", "4672063", "4672067", "4672069", "4672072", "4672073", "4672077", "4672090", "4672096", "4672099", "4672101", "4672110", "4672116", "4672118", "4672119", "4672131", "4672134", "4672141", "4672148", "4672151", "4672158", "4672164", "4672165", "4672174", "4672186", "4672188", "4672193", "4672196", "4672199", "4672205", "4672220", "4672224", "4672225", "4672230", "4672232", "4672235", "4672236", "4672240", "4672241", "4672242", "4672248", "4672260", "4671820", "4671827", "4671901", "4672157", "4672264", "4671840", "4672060", "4672156", "4672265", "4672282", "4671939", "4672007", "4672027", "4672047", "4672107", "4672140", "247033", "1031199", "1031215", "1031221", "1031224", "1031258", "1031259", "1031261", "1031262", "1031317", "1031318", "1031329", "1031335", "1031345", "1031347", "1031348", "1031350", "1031353", "1031375", "1031392", "1031394", "1031461", "1031466", "1031469", "1031470", "1031478", "1031483", "1031495", "1031500", "1031512", "1031517", "1031519", "1031523", "1031585", "1031602", "1031613", "1031616", "1031647", "1031649", "1031673", "1031674", "1031675", "1031698", "1031700", "1031717", "1031759", "1031765", "1031766", "1031814", "1031837", "1031892", "1031965", "1031971", "1031972", "1032015", "1032030", "1032111", "1032126", "1032133", "1032140", "1032159", "1032190", "1032197", "1032258", "1032308", "1032310", "1032353", "1032433", "1032459", "1032482", "1032484", "1032489", "1032496", "1032537", "1032558", "1032559", "1032560", "1032594", "1032600", "1032609", "1032709", "1032733", "1032750", "1032751", "1032784", "1032795", "1032802", "1032827", "1032853", "4671778", "4671787", "4671790", "4671792", "4671793", "4671794", "4671795", "4671796", "4671798", "4671800", "4671805", "4671810", "4671819", "4671822", "4671828", "4671830", "4671837", "4671841", "4671852", "4671856", "4671864", "4671865", "4671866", "4671868", "4671869", "4671872", "4671877", "4671878", "4671883", "4671885", "4671887", "4671889", "4671892", "4671896", "4671897", "4671898", "4671899", "4671904", "4671907", "4671911", "4671912", "4671927", "4671930", "4671944", "4671946", "4671952", "4671954", "4671957", "4671962", "4671967", "4671974", "4671978", "4671980", "4671981", "4671986", "4672001", "4672003", "4672006", "4672008", "4672009", "4672013", "4672014", "4672016", "4672017", "4672019", "4672020", "4672022", "4672023", "4672024", "4672030", "4672032", "4672033", "4672038", "4672040", "4672048", "4672051", "4672053", "4672055", "4672064", "4672065", "4672066", "4672070", "4672075", "4672093", "4672097", "4672100", "4672115", "4672123", "4672126", "4672127", "4672133", "4672135", "4672136", "4672138", "4672142", "4672144", "4672147", "4672150", "4672152", "4672159", "4672160", "4672161", "4672166", "4672169", "4672172", "4672177", "4672180", "4672182", "4672183", "4672185", "4672190", "4672191", "4672195", "4672200", "4672202", "4672204", "4672207", "4672209", "4672210", "4672212", "4672213", "4672216", "4672218", "4672221", "4672226", "4672228", "4672243", "4672246", "4672252", "4672253", "4672254", "4672266", "4672267", "4672274", "4672275", "4672276", "4672277", "4867768"];


    private $studentIdFor59 = [4614729, 4614735, 4614839, 4614859, 4614865, 4614868, 4614873, 4614879, 4614884, 4614885, 4614886, 4614892, 4614900, 4614903, 4614905, 4614910, 4614916, 4614920, 4614926, 4614929, 4614933, 4614936, 4614937, 4614940, 4614942, 4614944, 4614945, 4614950, 4614952, 4614961, 4614967, 4614972, 4614976, 4614980, 4614984, 4614990, 4614992, 4615010, 4615017, 4615019, 4615022, 4615026, 4615045, 4615051, 4615052, 4615056, 4615071, 4615086, 4615094, 4615099, 4615112, 4615114, 4615117, 4615122, 4615126, 4615130, 4615135, 4615137, 4615140, 4615142, 4615149, 4615156, 4615160, 4615164, 4615166, 4615168, 4615169, 4615170, 4615179, 4615180, 4615181, 4615182, 4615185, 4615186, 4615187, 4615188, 4615195, 4615202, 4615209, 4615211, 4615213, 4615220, 4615221, 4615230, 4615238, 4615239, 4615241, 4615243, 4615244, 4615245, 4615249, 4615250, 4615260, 4615261, 4615262, 4615264, 4615268, 4615276, 4615298, 4615299, 4615304, 4615307, 4615309, 4615316, 4615317, 4615323, 4615324, 4615333, 4615334, 4615338, 4615341, 4615342, 4615344, 4615345, 4615348, 4615349, 4615353, 4615371, 4615382, 4615388, 4615392, 4615397, 4615409, 4615422, 4615426, 4615428, 4615431, 4615449, 4615454, 4615457, 4615469, 4615474, 4615475, 4615484, 4615492, 4615499, 4615504, 4615509, 4615514, 4615533, 4615540, 4615545, 4615555, 4615558, 4615563, 4615571, 4615572, 4615598, 4615599, 4615610, 4615616, 4615620, 4615621, 4615622, 4615632, 4615637, 4615638, 4615646, 4615652, 4615658, 4615663, 4615665, 4615666, 4615676, 4615685, 4615689, 4615696, 4615714, 4615741, 4615747, 4615772, 4615781, 4615786, 4615789, 4615796, 4615798, 4615800, 4615806, 4615807, 4615814, 4615816, 4615819, 4615822, 4615826, 4615836, 4615854, 4615855, 4615861, 4615865, 4615867, 4615875, 4615876, 4615878, 4615880, 4615885, 4615887, 4615892, 4615894, 4615907, 4615912, 4615913, 4615922, 4615925, 4615928, 4615945, 4615958, 4615961, 4615964, 4615969, 4615972, 4615974, 4615975, 4615983, 4615988, 4615993, 4615997, 4615998, 4616000, 4616010, 4616011, 4616013, 4616014, 4616021, 4616026, 4616031, 4616032, 4616036, 4616038, 4616042, 4616047, 4616048, 4616055, 4616056, 4616057, 4616059, 4616062, 4616070, 4616075, 4616083, 4616087, 4616088, 4616091, 4616099, 4616103, 4616105, 4616111, 4616119, 4616121, 4616125, 4616132, 4616137, 4616150, 4616153, 4616155, 4616158, 4616163, 4616179, 4616183, 4616190, 4616192, 4616193, 4616195, 4616197, 4616207, 4616214, 4616231, 4616233, 4616238, 4616244, 4616245, 4616252, 4616266, 4616268, 4616286, 4616298, 4616303, 4616306, 4616317, 4616319, 4616322, 4616334, 4616336, 4616337, 4616345, 4616349, 4616360, 4616364, 4616366, 4616369, 4616371, 4616374, 4616380, 4616383, 4616384, 4616385, 4616388, 4616393, 4616395, 4616407, 4616409, 4616415, 4616417, 4616419, 4616425, 4616430, 4616443, 4616448, 4616452, 4616455, 4616458, 4616463, 4616464, 4616465, 4616474, 4616488, 4616490, 4616495, 4616500, 4616512, 4616515, 4616518, 4616524, 4616525, 4616536, 4616543, 4616547, 4616553, 4616560, 4616574, 4616588, 4616589, 4616593, 4616598, 4616599, 4616600, 4616619, 4616620, 4616622, 4616636, 4616644, 4616645, 4616651, 4616653, 4616654, 4616658, 4616673, 4616676, 4616678, 4616683, 4616685, 4616686, 4616687, 4616691, 4616697, 4616706, 4616709, 4616713, 4616714, 4616719, 4616722, 4616734, 4616738, 4616740, 4616741, 4616742, 4616747, 4616749, 4616751, 4616763, 4616773, 4616776, 4616784, 4616787, 4616788, 4616793, 4616799, 4616805, 4616810, 4616820, 4616821, 4616828, 4616829, 4616830, 4616831, 4616835, 4616837, 4616839, 4616846, 4616853, 4616865, 4616871, 4616875, 4616879, 4616880, 4616888, 4616904, 4616905, 4616911, 4616913, 4616921, 4616924, 4616925, 4616926, 4616930, 4616932, 4616936, 4616941, 4616950, 4616957, 4616961, 4616962, 4616963, 4616966, 4616976, 4616977, 4616981, 4616985, 4616989, 4616995, 4616998, 4617002, 4617016, 4617034, 4617045, 4617052, 4617054, 4617058, 4617064, 4617065, 4617066, 4617067, 4617070, 4617080, 4617084, 4617085, 4617089, 4617098, 4617100, 4617105, 4617111, 4617160, 4617163, 4617168, 4617170, 4617174, 4617180, 4617181, 4617182, 4617184, 4617199, 4617205, 4617208, 4617224, 4617232, 4617242, 4617245, 4617251, 4617254, 4617258, 4617267, 4617269, 4617273, 4617277, 4617279, 4617285, 4617286, 4617296, 4617297, 4617301, 4617310, 4617312, 4617317, 4617319, 4617328, 4617335, 4617336, 4617337, 4617342, 4617345, 4617346, 4617356, 4617360, 4617387, 4617395, 4617398, 4617414, 4617415, 4617422, 4617436, 4617449, 4617450, 4617455, 4617462, 4617470, 4617471, 4617472, 4617473, 4617477, 4617478, 4617479, 4617487, 4617489, 4617509, 4617512, 4617522, 4617525, 4617529, 4617550, 4617551, 4617563, 4617569, 4617575, 4617582, 4617584, 4617594, 4617596, 4617609, 4617624, 4617625, 4617627, 4617628, 4617630, 4617634, 4617635, 4617640, 4617650, 4617663, 4617664, 4617666, 4617683, 4617693, 4617696, 4617698, 4617700, 4617701, 4617712, 4617719, 4617721, 4617722, 4617724, 4617726, 4617739, 4617746, 4617752, 4617760, 4617770, 4617773, 4617777, 4617778, 4617780, 4617790, 4617795, 4617814, 4617815, 4617818, 4617827, 4617835, 4617840, 4617844, 4617846, 4617850, 4617855, 4617864, 4617865, 4617867, 4617868, 4617869, 4617875, 4617876, 4617879, 4617882, 4617888, 4617899, 4617905, 4617908, 4617910, 4617913, 4617919, 4617932, 4617937, 4617939, 4617941, 4617948, 4617950, 4617955, 4617961, 4617963, 4617968, 4617983, 4617984, 4617998, 4618001, 4618004, 4618019, 4618024, 4618032, 4618038, 4618043, 4618049, 4618054, 4618060, 4618061, 4618070, 4618071, 4618074, 4618084, 4618085, 4618094, 4618110, 4618113, 4618123, 4618128, 4618132, 4618135, 4618142, 4618151, 4618153, 4618157, 4618159, 4618169, 4618183, 4618197, 4618199, 4618203, 4618204, 4618236, 4618242, 4618245, 4618249, 4618250, 4618251, 4631463, 4631524, 4652144, 4652149, 4652153, 4652156, 4664276, 4664279, 4664280, 4664293, 4668802, 4668807, 4668813, 4668818, 4668824, 4670023, 4670024, 4670026, 4670029, 4670042, 4670043, 4670044, 4670047, 4670052];

    public function _before()
    {
        $this->container = $this->getModule('Symfony2')->kernel->getContainer();
        $this->repositoryResolver = $this->container->get('repository_resolver');
        $this->personFactorCalculatedRepository = $this->repositoryResolver->getRepository(\Synapse\SurveyBundle\Repository\PersonFactorCalculatedRepository::REPOSITORY_KEY);
    }

    public function testGetStudentsWithCalculatedFactorValueWithinRange()
    {
        $this->specify('test getStudentsWithCalculatedFactorValueWithinRange', function ($factorId, $surveyId, $studentIds, $minimumFactorValue, $maxmimumFactorValue, $expectedResults) {
            $functionResults = $this->personFactorCalculatedRepository->getStudentsWithCalculatedFactorValueWithinRange($factorId, $surveyId, $studentIds, $minimumFactorValue, $maxmimumFactorValue);
            $this->assertEquals($functionResults, $expectedResults);
        }, [
            'examples' => [
                //Factor range 6-8 for factor 1, survey 11.
                [
                    1,
                    11,
                    $this->studentIds,
                    6,
                    8,
                    [
                        0 => '1031673',
                        1 => '1031741',
                        2 => '4671779',
                        3 => '4671780',
                        4 => '4671781',
                        5 => '4671782',
                        6 => '4671783',
                        7 => '4671784',
                        8 => '4671785',
                        9 => '4671786',
                        10 => '4671787',
                        11 => '4671791',
                        12 => '4671794',
                        13 => '4671795',
                        14 => '4671797',
                        15 => '4671798',
                        16 => '4671799',
                        17 => '4671801',
                        18 => '4671802',
                        19 => '4671803',
                        20 => '4671805',
                        21 => '4671806',
                        22 => '4671807',
                        23 => '4671808',
                        24 => '4671809',
                        25 => '4671810',
                        26 => '4671811',
                        27 => '4671812',
                        28 => '4671813',
                        29 => '4671814',
                        30 => '4671816',
                        31 => '4671817',
                        32 => '4671818',
                        33 => '4671820',
                        34 => '4671822',
                        35 => '4671825',
                        36 => '4671827',
                        37 => '4671829',
                        38 => '4671831',
                        39 => '4671833',
                        40 => '4671834',
                        41 => '4671835',
                        42 => '4671836',
                        43 => '4671837',
                        44 => '4671839',
                        45 => '4671840',
                        46 => '4671842',
                        47 => '4671843',
                        48 => '4671845',
                        49 => '4671846',
                        50 => '4671847',
                        51 => '4671848',
                        52 => '4671849',
                        53 => '4671852',
                        54 => '4671854',
                        55 => '4671855',
                        56 => '4671856',
                        57 => '4671858',
                        58 => '4671859',
                        59 => '4671862',
                        60 => '4671864',
                        61 => '4671865',
                        62 => '4671866',
                        63 => '4671869',
                        64 => '4671870',
                        65 => '4671871',
                        66 => '4671873',
                        67 => '4671874',
                        68 => '4671879',
                        69 => '4671880',
                        70 => '4671881',
                        71 => '4671882',
                        72 => '4671883',
                        73 => '4671884',
                        74 => '4671885',
                        75 => '4671887',
                        76 => '4671889',
                        77 => '4671891',
                        78 => '4671892',
                        79 => '4671893',
                        80 => '4671894',
                        81 => '4671895',
                        82 => '4671898',
                        83 => '4671901',
                        84 => '4671905',
                        85 => '4671906',
                        86 => '4671907',
                        87 => '4671908',
                        88 => '4671910',
                        89 => '4671913',
                        90 => '4671914',
                        91 => '4671915',
                        92 => '4671916',
                        93 => '4671917',
                        94 => '4671919',
                        95 => '4671921',
                        96 => '4671922',
                        97 => '4671925',
                        98 => '4671928',
                        99 => '4671929',
                        100 => '4671932',
                        101 => '4671933',
                        102 => '4671934',
                        103 => '4671935',
                        104 => '4671937',
                        105 => '4671938',
                        106 => '4671939',
                        107 => '4671940',
                        108 => '4671941',
                        109 => '4671942',
                        110 => '4671943',
                        111 => '4671947',
                        112 => '4671948',
                        113 => '4671951',
                        114 => '4671953',
                        115 => '4671955',
                        116 => '4671957',
                        117 => '4671959',
                        118 => '4671960',
                        119 => '4671961',
                        120 => '4671962',
                        121 => '4671963',
                        122 => '4671964',
                        123 => '4671965',
                        124 => '4671967',
                        125 => '4671968',
                        126 => '4671969',
                        127 => '4671971',
                        128 => '4671972',
                        129 => '4671973',
                        130 => '4671979',
                        131 => '4671980',
                        132 => '4671983',
                        133 => '4671984',
                        134 => '4671985',
                        135 => '4671986',
                        136 => '4671987',
                        137 => '4671988',
                        138 => '4671989',
                        139 => '4671991',
                        140 => '4671992',
                        141 => '4671993',
                        142 => '4671994',
                        143 => '4671996',
                        144 => '4671997',
                        145 => '4671999',
                        146 => '4672000',
                        147 => '4672002',
                        148 => '4672003',
                        149 => '4672004',
                        150 => '4672009',
                        151 => '4672010',
                        152 => '4672011',
                        153 => '4672012',
                        154 => '4672013',
                        155 => '4672016',
                        156 => '4672019',
                        157 => '4672021',
                        158 => '4672022',
                        159 => '4672024',
                        160 => '4672025',
                        161 => '4672028',
                        162 => '4672029',
                        163 => '4672031',
                        164 => '4672033',
                        165 => '4672034',
                        166 => '4672035',
                        167 => '4672036',
                        168 => '4672037',
                        169 => '4672039',
                        170 => '4672041',
                        171 => '4672042',
                        172 => '4672043',
                        173 => '4672045',
                        174 => '4672047',
                        175 => '4672048',
                        176 => '4672049',
                        177 => '4672050',
                        178 => '4672052',
                        179 => '4672053',
                        180 => '4672055',
                        181 => '4672057',
                        182 => '4672058',
                        183 => '4672060',
                        184 => '4672061',
                        185 => '4672064',
                        186 => '4672067',
                        187 => '4672068',
                        188 => '4672069',
                        189 => '4672071',
                        190 => '4672072',
                        191 => '4672073',
                        192 => '4672074',
                        193 => '4672076',
                        194 => '4672077',
                        195 => '4672078',
                        196 => '4672079',
                        197 => '4672080',
                        198 => '4672081',
                        199 => '4672082',
                        200 => '4672084',
                        201 => '4672085',
                        202 => '4672086',
                        203 => '4672087',
                        204 => '4672088',
                        205 => '4672089',
                        206 => '4672090',
                        207 => '4672091',
                        208 => '4672093',
                        209 => '4672094',
                        210 => '4672095',
                        211 => '4672096',
                        212 => '4672099',
                        213 => '4672100',
                        214 => '4672103',
                        215 => '4672104',
                        216 => '4672105',
                        217 => '4672106',
                        218 => '4672107',
                        219 => '4672108',
                        220 => '4672109',
                        221 => '4672110',
                        222 => '4672111',
                        223 => '4672113',
                        224 => '4672115',
                        225 => '4672116',
                        226 => '4672117',
                        227 => '4672119',
                        228 => '4672120',
                        229 => '4672121',
                        230 => '4672122',
                        231 => '4672123',
                        232 => '4672124',
                        233 => '4672125',
                        234 => '4672128',
                        235 => '4672129',
                        236 => '4672130',
                        237 => '4672131',
                        238 => '4672133',
                        239 => '4672134',
                        240 => '4672135',
                        241 => '4672138',
                        242 => '4672141',
                        243 => '4672142',
                        244 => '4672146',
                        245 => '4672147',
                        246 => '4672150',
                        247 => '4672151',
                        248 => '4672152',
                        249 => '4672153',
                        250 => '4672154',
                        251 => '4672156',
                        252 => '4672157',
                        253 => '4672158',
                        254 => '4672159',
                        255 => '4672160',
                        256 => '4672161',
                        257 => '4672162',
                        258 => '4672163',
                        259 => '4672164',
                        260 => '4672165',
                        261 => '4672166',
                        262 => '4672167',
                        263 => '4672168',
                        264 => '4672170',
                        265 => '4672171',
                        266 => '4672172',
                        267 => '4672173',
                        268 => '4672174',
                        269 => '4672178',
                        270 => '4672180',
                        271 => '4672181',
                        272 => '4672184',
                        273 => '4672185',
                        274 => '4672186',
                        275 => '4672188',
                        276 => '4672190',
                        277 => '4672193',
                        278 => '4672194',
                        279 => '4672196',
                        280 => '4672197',
                        281 => '4672198',
                        282 => '4672199',
                        283 => '4672201',
                        284 => '4672203',
                        285 => '4672204',
                        286 => '4672205',
                        287 => '4672206',
                        288 => '4672210',
                        289 => '4672211',
                        290 => '4672215',
                        291 => '4672216',
                        292 => '4672217',
                        293 => '4672221',
                        294 => '4672224',
                        295 => '4672225',
                        296 => '4672226',
                        297 => '4672227',
                        298 => '4672228',
                        299 => '4672229',
                        300 => '4672231',
                        301 => '4672232',
                        302 => '4672233',
                        303 => '4672234',
                        304 => '4672235',
                        305 => '4672236',
                        306 => '4672237',
                        307 => '4672239',
                        308 => '4672241',
                        309 => '4672242',
                        310 => '4672244',
                        311 => '4672247',
                        312 => '4672248',
                        313 => '4672251',
                        314 => '4672252',
                        315 => '4672253',
                        316 => '4672255',
                        317 => '4672258',
                        318 => '4672259',
                        319 => '4672260',
                        320 => '4672261',
                        321 => '4672262',
                        322 => '4672263',
                        323 => '4672264',
                        324 => '4672265',
                        325 => '4672266',
                        326 => '4672267',
                        327 => '4672268',
                        328 => '4672269',
                        329 => '4672270',
                        330 => '4672271',
                        331 => '4672273',
                        332 => '4672275',
                        333 => '4672279',
                        334 => '4672280',
                        335 => '4673340'
                    ]
                ],
                //Factor range 3-5 for factor 1, survey 11.
                [
                    1,
                    11,
                    $this->studentIds,
                    3,
                    5,
                    [
                        0 => '4671793',
                        1 => '4671851',
                        2 => '4671861',
                        3 => '4671875',
                        4 => '4671909',
                        5 => '4671936',
                        6 => '4671952',
                        7 => '4671974',
                        8 => '4671975',
                        9 => '4672005',
                        10 => '4672023',
                        11 => '4672054',
                        12 => '4672127',
                        13 => '4672148',
                        14 => '4672183',
                        15 => '4672212',
                        16 => '4672214',
                        17 => '4672218',
                        18 => '4672243'
                    ]
                ],
                //Factor range 1-2 for factor 1, survey 11.
                [
                    1,
                    11,
                    $this->studentIds,
                    1,
                    2,
                    [
                        0 => '4672040',
                        1 => '4672207'
                    ]
                ],
                //All factor values for factor 1, survey 11.
                [
                    1,
                    11,
                    $this->studentIds,
                    null,
                    null,
                    [
                        0 => '1031673',
                        1 => '1031741',
                        2 => '4671779',
                        3 => '4671780',
                        4 => '4671781',
                        5 => '4671782',
                        6 => '4671783',
                        7 => '4671784',
                        8 => '4671785',
                        9 => '4671786',
                        10 => '4671787',
                        11 => '4671791',
                        12 => '4671793',
                        13 => '4671794',
                        14 => '4671795',
                        15 => '4671797',
                        16 => '4671798',
                        17 => '4671799',
                        18 => '4671801',
                        19 => '4671802',
                        20 => '4671803',
                        21 => '4671804',
                        22 => '4671805',
                        23 => '4671806',
                        24 => '4671807',
                        25 => '4671808',
                        26 => '4671809',
                        27 => '4671810',
                        28 => '4671811',
                        29 => '4671812',
                        30 => '4671813',
                        31 => '4671814',
                        32 => '4671815',
                        33 => '4671816',
                        34 => '4671817',
                        35 => '4671818',
                        36 => '4671820',
                        37 => '4671822',
                        38 => '4671825',
                        39 => '4671826',
                        40 => '4671827',
                        41 => '4671829',
                        42 => '4671831',
                        43 => '4671833',
                        44 => '4671834',
                        45 => '4671835',
                        46 => '4671836',
                        47 => '4671837',
                        48 => '4671839',
                        49 => '4671840',
                        50 => '4671842',
                        51 => '4671843',
                        52 => '4671845',
                        53 => '4671846',
                        54 => '4671847',
                        55 => '4671848',
                        56 => '4671849',
                        57 => '4671851',
                        58 => '4671852',
                        59 => '4671853',
                        60 => '4671854',
                        61 => '4671855',
                        62 => '4671856',
                        63 => '4671858',
                        64 => '4671859',
                        65 => '4671861',
                        66 => '4671862',
                        67 => '4671863',
                        68 => '4671864',
                        69 => '4671865',
                        70 => '4671866',
                        71 => '4671869',
                        72 => '4671870',
                        73 => '4671871',
                        74 => '4671872',
                        75 => '4671873',
                        76 => '4671874',
                        77 => '4671875',
                        78 => '4671879',
                        79 => '4671880',
                        80 => '4671881',
                        81 => '4671882',
                        82 => '4671883',
                        83 => '4671884',
                        84 => '4671885',
                        85 => '4671887',
                        86 => '4671889',
                        87 => '4671891',
                        88 => '4671892',
                        89 => '4671893',
                        90 => '4671894',
                        91 => '4671895',
                        92 => '4671898',
                        93 => '4671901',
                        94 => '4671903',
                        95 => '4671905',
                        96 => '4671906',
                        97 => '4671907',
                        98 => '4671908',
                        99 => '4671909',
                        100 => '4671910',
                        101 => '4671913',
                        102 => '4671914',
                        103 => '4671915',
                        104 => '4671916',
                        105 => '4671917',
                        106 => '4671919',
                        107 => '4671921',
                        108 => '4671922',
                        109 => '4671923',
                        110 => '4671925',
                        111 => '4671928',
                        112 => '4671929',
                        113 => '4671932',
                        114 => '4671933',
                        115 => '4671934',
                        116 => '4671935',
                        117 => '4671936',
                        118 => '4671937',
                        119 => '4671938',
                        120 => '4671939',
                        121 => '4671940',
                        122 => '4671941',
                        123 => '4671942',
                        124 => '4671943',
                        125 => '4671947',
                        126 => '4671948',
                        127 => '4671949',
                        128 => '4671950',
                        129 => '4671951',
                        130 => '4671952',
                        131 => '4671953',
                        132 => '4671955',
                        133 => '4671956',
                        134 => '4671957',
                        135 => '4671959',
                        136 => '4671960',
                        137 => '4671961',
                        138 => '4671962',
                        139 => '4671963',
                        140 => '4671964',
                        141 => '4671965',
                        142 => '4671967',
                        143 => '4671968',
                        144 => '4671969',
                        145 => '4671970',
                        146 => '4671971',
                        147 => '4671972',
                        148 => '4671973',
                        149 => '4671974',
                        150 => '4671975',
                        151 => '4671978',
                        152 => '4671979',
                        153 => '4671980',
                        154 => '4671983',
                        155 => '4671984',
                        156 => '4671985',
                        157 => '4671986',
                        158 => '4671987',
                        159 => '4671988',
                        160 => '4671989',
                        161 => '4671990',
                        162 => '4671991',
                        163 => '4671992',
                        164 => '4671993',
                        165 => '4671994',
                        166 => '4671996',
                        167 => '4671997',
                        168 => '4671999',
                        169 => '4672000',
                        170 => '4672002',
                        171 => '4672003',
                        172 => '4672004',
                        173 => '4672005',
                        174 => '4672006',
                        175 => '4672009',
                        176 => '4672010',
                        177 => '4672011',
                        178 => '4672012',
                        179 => '4672013',
                        180 => '4672016',
                        181 => '4672017',
                        182 => '4672019',
                        183 => '4672021',
                        184 => '4672022',
                        185 => '4672023',
                        186 => '4672024',
                        187 => '4672025',
                        188 => '4672028',
                        189 => '4672029',
                        190 => '4672031',
                        191 => '4672033',
                        192 => '4672034',
                        193 => '4672035',
                        194 => '4672036',
                        195 => '4672037',
                        196 => '4672038',
                        197 => '4672039',
                        198 => '4672040',
                        199 => '4672041',
                        200 => '4672042',
                        201 => '4672043',
                        202 => '4672045',
                        203 => '4672046',
                        204 => '4672047',
                        205 => '4672048',
                        206 => '4672049',
                        207 => '4672050',
                        208 => '4672052',
                        209 => '4672053',
                        210 => '4672054',
                        211 => '4672055',
                        212 => '4672057',
                        213 => '4672058',
                        214 => '4672060',
                        215 => '4672061',
                        216 => '4672064',
                        217 => '4672065',
                        218 => '4672067',
                        219 => '4672068',
                        220 => '4672069',
                        221 => '4672071',
                        222 => '4672072',
                        223 => '4672073',
                        224 => '4672074',
                        225 => '4672076',
                        226 => '4672077',
                        227 => '4672078',
                        228 => '4672079',
                        229 => '4672080',
                        230 => '4672081',
                        231 => '4672082',
                        232 => '4672084',
                        233 => '4672085',
                        234 => '4672086',
                        235 => '4672087',
                        236 => '4672088',
                        237 => '4672089',
                        238 => '4672090',
                        239 => '4672091',
                        240 => '4672093',
                        241 => '4672094',
                        242 => '4672095',
                        243 => '4672096',
                        244 => '4672099',
                        245 => '4672100',
                        246 => '4672102',
                        247 => '4672103',
                        248 => '4672104',
                        249 => '4672105',
                        250 => '4672106',
                        251 => '4672107',
                        252 => '4672108',
                        253 => '4672109',
                        254 => '4672110',
                        255 => '4672111',
                        256 => '4672113',
                        257 => '4672115',
                        258 => '4672116',
                        259 => '4672117',
                        260 => '4672119',
                        261 => '4672120',
                        262 => '4672121',
                        263 => '4672122',
                        264 => '4672123',
                        265 => '4672124',
                        266 => '4672125',
                        267 => '4672127',
                        268 => '4672128',
                        269 => '4672129',
                        270 => '4672130',
                        271 => '4672131',
                        272 => '4672133',
                        273 => '4672134',
                        274 => '4672135',
                        275 => '4672138',
                        276 => '4672140',
                        277 => '4672141',
                        278 => '4672142',
                        279 => '4672146',
                        280 => '4672147',
                        281 => '4672148',
                        282 => '4672150',
                        283 => '4672151',
                        284 => '4672152',
                        285 => '4672153',
                        286 => '4672154',
                        287 => '4672155',
                        288 => '4672156',
                        289 => '4672157',
                        290 => '4672158',
                        291 => '4672159',
                        292 => '4672160',
                        293 => '4672161',
                        294 => '4672162',
                        295 => '4672163',
                        296 => '4672164',
                        297 => '4672165',
                        298 => '4672166',
                        299 => '4672167',
                        300 => '4672168',
                        301 => '4672170',
                        302 => '4672171',
                        303 => '4672172',
                        304 => '4672173',
                        305 => '4672174',
                        306 => '4672178',
                        307 => '4672180',
                        308 => '4672181',
                        309 => '4672183',
                        310 => '4672184',
                        311 => '4672185',
                        312 => '4672186',
                        313 => '4672188',
                        314 => '4672190',
                        315 => '4672193',
                        316 => '4672194',
                        317 => '4672196',
                        318 => '4672197',
                        319 => '4672198',
                        320 => '4672199',
                        321 => '4672201',
                        322 => '4672203',
                        323 => '4672204',
                        324 => '4672205',
                        325 => '4672206',
                        326 => '4672207',
                        327 => '4672210',
                        328 => '4672211',
                        329 => '4672212',
                        330 => '4672214',
                        331 => '4672215',
                        332 => '4672216',
                        333 => '4672217',
                        334 => '4672218',
                        335 => '4672221',
                        336 => '4672224',
                        337 => '4672225',
                        338 => '4672226',
                        339 => '4672227',
                        340 => '4672228',
                        341 => '4672229',
                        342 => '4672231',
                        343 => '4672232',
                        344 => '4672233',
                        345 => '4672234',
                        346 => '4672235',
                        347 => '4672236',
                        348 => '4672237',
                        349 => '4672239',
                        350 => '4672241',
                        351 => '4672242',
                        352 => '4672243',
                        353 => '4672244',
                        354 => '4672247',
                        355 => '4672248',
                        356 => '4672251',
                        357 => '4672252',
                        358 => '4672253',
                        359 => '4672255',
                        360 => '4672258',
                        361 => '4672259',
                        362 => '4672260',
                        363 => '4672261',
                        364 => '4672262',
                        365 => '4672263',
                        366 => '4672264',
                        367 => '4672265',
                        368 => '4672266',
                        369 => '4672267',
                        370 => '4672268',
                        371 => '4672269',
                        372 => '4672270',
                        373 => '4672271',
                        374 => '4672273',
                        375 => '4672275',
                        376 => '4672279',
                        377 => '4672280',
                        378 => '4673340'
                    ]
                ]
            ]
        ]);
    }

    public function testGetTopFactorsCorrelatedToPersistence()
    {

        $this->specify('test getTopFactorsCorrelatedToPersistence', function ($studentIds, $surveyId, $cohort, $orgAcademicYearId, $yearsFromRetentionTrack, $isMidYear, $limit, $expectedResult) {

            if (!is_null($limit)) {
                $functionResults = $this->personFactorCalculatedRepository->getTopFactorsCorrelatedToPersistence($studentIds, $surveyId, $cohort, $orgAcademicYearId, $yearsFromRetentionTrack, $isMidYear, $limit);
            } else {
                $functionResults = $this->personFactorCalculatedRepository->getTopFactorsCorrelatedToPersistence($studentIds, $surveyId, $cohort, $orgAcademicYearId, $yearsFromRetentionTrack, $isMidYear);
            }

            verify($functionResults)->equals($expectedResult);
        }, [
            'examples' => [
                // Finding out the top 5 factors , $limit = 5
                [$this->studentIdFor59, 11, 1, 94, 1, 1, 5,
                    [
                        [
                            'factor_id' => 2,
                            'name' => 'Self-Assessment: Communication Skills',
                            'correlation' => 0.07069478195130362
                        ],
                        [

                            'factor_id' => 13,
                            'name' => 'Homesickness: Distressed',
                            'correlation' => 0.06950673589461748
                        ],

                        [
                            'factor_id' => 12,
                            'name' => 'Homesickness: Separation',
                            'correlation' => 0.0675769425463927
                        ],
                        [
                            'factor_id' => 20,
                            'name' => 'Off-Campus Living: Environment ',
                            'correlation' => 0.05857183766704982
                        ],
                        [
                            'factor_id' => 7,
                            'name' => 'Basic Academic Behaviors',
                            'correlation' => 0.05309303150458174
                        ]
                    ]
                ],

                // Finding out the top 3 factors , $limit = 3
                [$this->studentIdFor59, 11, 1, 94, 1, 1, 3,
                    [
                        [
                            'factor_id' => 2,
                            'name' => 'Self-Assessment: Communication Skills',
                            'correlation' => 0.07069478195130362
                        ],
                        [

                            'factor_id' => 13,
                            'name' => 'Homesickness: Distressed',
                            'correlation' => 0.06950673589461748
                        ],

                        [
                            'factor_id' => 12,
                            'name' => 'Homesickness: Separation',
                            'correlation' => 0.0675769425463927
                        ]
                    ]
                ],

                // Finds out the top 5 factors by default , $limit in this case is not passed in
                [$this->studentIdFor59, 11, 1, 94, 1, 1, null,
                    [
                        [
                            'factor_id' => 2,
                            'name' => 'Self-Assessment: Communication Skills',
                            'correlation' => 0.07069478195130362
                        ],
                        [

                            'factor_id' => 13,
                            'name' => 'Homesickness: Distressed',
                            'correlation' => 0.06950673589461748
                        ],

                        [
                            'factor_id' => 12,
                            'name' => 'Homesickness: Separation',
                            'correlation' => 0.0675769425463927
                        ],
                        [
                            'factor_id' => 20,
                            'name' => 'Off-Campus Living: Environment ',
                            'correlation' => 0.05857183766704982
                        ],
                        [
                            'factor_id' => 7,
                            'name' => 'Basic Academic Behaviors',
                            'correlation' => 0.05309303150458174
                        ]
                    ]
                ],
            ]]);
    }

}